"use strict";!function(){var r={},t=[];function o(n){if(r[n])return r[n];var o=new Image;o.onload=function(){r[n]=o,c()&&t.forEach(function(n){n()})},r[n]=!1,o.src=n}function c(){var n=!0;for(var o in r)r.hasOwnProperty(o)&&!r[o]&&(n=!1);return n}window.Resources={load:function(n){n instanceof Array?n.forEach(function(n){o(n)}):o(n)},get:function(n){return r[n]},onReady:function(n){t.push(n)},isReady:c}}();
"use strict";var Engine=function(e){var n,a=e.document,g=e.window,i=a.createElement("canvas"),o=i.getContext("2d");function r(){var e=Date.now();!function(e){!function(n){allEnemies.forEach(function(e){e.update(n)}),player.update()}(e)}((e-n)/1e3),function(){var e,n,a=["../images/water-block.png","../images/stone-block.png","../images/stone-block.png","../images/stone-block.png","../images/grass-block.png","../images/grass-block.png"];for(o.clearRect(0,0,i.width,i.height),e=0;e<6;e++)for(n=0;n<5;n++)o.drawImage(Resources.get(a[e]),101*n,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),n=e,g.requestAnimationFrame(r)}i.width=505,i.height=606,a.body.appendChild(i),Resources.load(["../images/stone-block.png","../images/water-block.png","../images/grass-block.png","../images/enemy-bug.png","../images/char-boy.png","../images/char-cat-girl.png","../images/char-horn-girl.png","../images/char-pink-girl.png","../images/char-princess-girl.png"]),Resources.onReady(function(){n=Date.now(),r()}),e.ctx=o}(void 0);
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var gameTime=0,incTimer=function(){return gameTime++},gameTimer=function(){return setInterval(incTimer,1e3)},Enemy=function(){function n(e,t){_classCallCheck(this,n),this.sprite="../src/images/enemy-bug.png",this.x=e,this.y=t,this.velX=70*(Math.random()+1),this.width=30,this.height=30}return _createClass(n,[{key:"update",value:function(e){this.x+=this.velX*e*(.8*Player.level),500<this.x&&(this.x=-100),player.x-player.width<this.x+this.width&&player.x+player.width>this.x-this.width&&player.y+player.height>this.y-this.height&&player.y-player.height<this.y+this.height&&!0===player.alive&&(player.alive=!1,hitSound.play(),player.lives--,0<player.lives?Swal.fire("Ewwwwwwwwwwwww!","You touched it!"):Swal.fire("Game Over!","You made it to Level ".concat(Player.level)),setTimeout(function(){player.x=100,player.y=400,allEnemies=[new n(-80,60),new n(-80,145),new n(-80,225),new n(-80,310)]},500),setTimeout(function(){player.alive=!0},1e3))}},{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}}]),n}(),Player=function(){function n(e,t){_classCallCheck(this,n),this.sprite="images/char-boy.png",this.x=e,this.y=t,this.lives=3,this.width=20,this.height=20,this.alive=!0}return _createClass(n,[{key:"update",value:function(){var e=this;this.y<60&&!this.win&&(waterSound.play(),this.alive=!1,this.win=!0,setTimeout(function(){e.y=400,e.x=100,e.alive=!0,e.win=!1,n.level++,Swal.fire("Nice job!","Level ".concat(n.level)),n.highestlevel<n.level&&(n.highestlevel=n.level)},1500)),updateStats(),0===player.lives&&(n.level=1,player.lives=3)}},{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"handleInput",value:function(e){"string"==typeof e&&("left"===e&&0<this.x&&!0===this.alive&&(this.x=this.x-100),"right"===e&&this.x<400&&!0===this.alive&&(this.x=this.x+100),"up"===e&&0<this.y&&!0===this.alive&&(this.y=this.y-85),"down"===e&&this.y<399&&!0===this.alive&&(this.y=this.y+85),300<player.y&&(grassSound.stop(),grassSound.play()),50<player.y&&player.y<300&&stoneSound.play())}}]),n}(),allEnemies=[new Enemy(-80,60),new Enemy(-80,145),new Enemy(-80,225),new Enemy(-80,310)],player=new Player(100,400);document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var statsBar=document.createElement("div");statsBar.innerHTML="<div class='stats'> Lives: ".concat(player.lives," Level: ").concat(Player.level,"</div>");var levelCounter=document.createElement("div");levelCounter.innerHTML="<div class='levels'><h1>Level: ".concat(Player.level,"</h1>\n<h1>Highest Level: ").concat(Player.highestlevel,"</h1></div>"),document.addEventListener("DOMContentLoaded",function(){document.querySelector("canvas").insertAdjacentElement("beforebegin",statsBar),document.querySelector("canvas").insertAdjacentElement("beforebegin",levelCounter)});var updateStats=function(){statsBar.innerHTML="<h1 class='title'> BUGGER\n  </h1>",levelCounter.innerHTML='<div class="levelbar"><h2>Level: '.concat(Player.level,'</h2><div class="lifecounter"><h2> Lives: ').concat(player.lives,"</h2></div>\n  <h2>Highest Level: ").concat(Player.highestlevel,"</h2>")},Sound=function e(t){_classCallCheck(this,e),this.sound=document.createElement("audio"),this.sound.src=t,this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none",document.body.appendChild(this.sound),this.play=function(){this.sound.play()},this.stop=function(){this.sound.pause(),this.sound.currentTime=0}},hitSound=new Sound("./sounds/diesound.mp3"),waterSound=new Sound("./sounds/watersplat.mp3"),grassSound=new Sound("./sounds/grass.wav"),stoneSound=new Sound("./sounds/stone.wav");gameTimer(),document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("div");e.innerHTML='<form onsubmit=\'changeChar()\'>\n  <select player="chars" size="3">\n    <option selected value="images/char-boy.png">Boy</option>\n    <option value="images/char-cat-girl.png">Girl</option>\n    <option value="images/char-horn-girl.png">Girl 2</option>\n    <option value="images/char-pink-girl.png">Girl 3</option>\n    <option value="images/char-princess-girl.png">Princess</option>\n  </select>\n<input type=\'submit\' class=\'char-select\' value=\'Change Character\'>',document.querySelector("canvas").insertAdjacentElement("afterend",e)}),document.addEventListener("DOMContentLoaded",function(){document.querySelector("form .char-select").addEventListener("click",function(e){e.preventDefault(),player.sprite=document.querySelector("form select").value})});